<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Caesar Cipher Encoder/Decoder</title>
    <!-- Load Tailwind CSS from CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font for a clean look */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7; /* Light background */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 1rem;
        }

        /* Styling for the shift input to look centered */
        #shift-value {
            text-align: center;
        }

        /* Button hover effects */
        .btn-primary {
            transition: all 0.15s ease-in-out;
        }
        .btn-encrypt:hover {
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.4);
            transform: translateY(-1px);
        }
        .btn-decrypt:hover {
            box-shadow: 0 4px 15px rgba(59, 130, 246, 0.4);
            transform: translateY(-1px);
        }
    </style>
</head>
<body>

    <div class="w-full max-w-lg p-8 bg-white rounded-xl shadow-2xl border border-gray-100">
        
        <!-- Header -->
        <h1 class="text-3xl font-extrabold text-gray-800 text-center mb-2">
            Caesar Cipher ðŸ”’
        </h1>
        <p class="text-center text-gray-500 mb-8">
            Encrypt and decrypt messages using a rotational shift.
        </p>

        <!-- Input Area -->
        <div class="space-y-6">
            <!-- Message Input -->
            <div>
                <label for="message-input" class="block text-sm font-medium text-gray-700 mb-1">Message (Text to process)</label>
                <textarea id="message-input" rows="4" 
                    class="w-full p-3 border border-gray-300 rounded-lg focus:ring-indigo-500 focus:border-indigo-500 text-gray-800 transition duration-150 ease-in-out" 
                    placeholder="Enter your secret message here..."></textarea>
            </div>

            <!-- Shift Value Input -->
            <div>
                <label for="shift-value" class="block text-sm font-medium text-gray-700 mb-1">Shift Value (0-25)</label>
                <input type="number" id="shift-value" value="3" min="0" max="25" 
                    class="w-full p-3 border border-gray-300 rounded-lg text-lg font-semibold focus:ring-indigo-500 focus:border-indigo-500 text-gray-800 transition duration-150 ease-in-out">
            </div>

            <!-- Action Buttons -->
            <div class="flex flex-col sm:flex-row space-y-3 sm:space-y-0 sm:space-x-4">
                <button id="encrypt-btn" class="btn-primary btn-encrypt w-full py-3 px-4 bg-green-500 text-white font-bold rounded-lg shadow-md hover:bg-green-600 transition duration-200">
                    Encrypt
                </button>
                <button id="decrypt-btn" class="btn-primary btn-decrypt w-full py-3 px-4 bg-blue-500 text-white font-bold rounded-lg shadow-md hover:bg-blue-600 transition duration-200">
                    Decrypt
                </button>
            </div>
        </div>

        <!-- Output Area -->
        <div class="mt-8 pt-6 border-t border-gray-200">
            <h2 class="text-xl font-bold text-gray-800 mb-3">Result:</h2>
            <div id="result-box" class="bg-gray-50 p-4 min-h-20 rounded-lg border border-gray-300 whitespace-pre-wrap text-gray-800">
            </div>
        </div>
    </div>

    <script>
        // Global utility function for the Caesar Cipher logic
        function caesarCipher(text, shift, mode) {
            // Check if shift is valid
            if (isNaN(shift) || shift === null) {
                return "Error: Invalid shift value.";
            }

            // Adjust shift value based on mode
            if (mode === 'decrypt') {
                shift = -shift;
            }

            let result = '';
            for (let i = 0; i < text.length; i++) {
                let char = text[i];

                if (/[a-zA-Z]/.test(char)) {
                    // Handle letters
                    const start = char === char.toLowerCase() ? 'a'.charCodeAt(0) : 'A'.charCodeAt(0);
                    const originalIndex = char.charCodeAt(0) - start;
                    
                    // Modulo arithmetic for wrapping (the '+ 26) % 26' handles negative results correctly)
                    const newIndex = ((originalIndex + shift) % 26 + 26) % 26;
                    
                    result += String.fromCharCode(start + newIndex);
                } else if (/[0-9]/.test(char)) {
                    // Handle numbers (optional enhancement: shift digits 0-9)
                    const digit = parseInt(char, 10);
                    const newDigit = ((digit + shift) % 10 + 10) % 10;
                    result += newDigit.toString();
                } else {
                    // Keep spaces, punctuation, etc., unchanged
                    result += char;
                }
            }
            return result;
        }

        // Function to handle the button clicks
        function processCipher(mode) {
            const messageInput = document.getElementById('message-input').value;
            let shiftValue = parseInt(document.getElementById('shift-value').value, 10);
            const resultBox = document.getElementById('result-box');

            if (!messageInput.trim()) {
                resultBox.textContent = "Please enter a message to process.";
                resultBox.classList.remove('text-indigo-600', 'font-bold');
                resultBox.classList.add('text-red-600');
                return;
            }
            
            // Normalize shift value to be between 0 and 25
            if (isNaN(shiftValue)) {
                shiftValue = 0;
            }
            shiftValue = shiftValue % 26;

            const processedText = caesarCipher(messageInput, shiftValue, mode);
            
            // Update the result box with the output and styling
            resultBox.textContent = processedText;
            resultBox.classList.remove('text-red-600', 'text-indigo-600'); 
            resultBox.classList.add('text-gray-800', 'font-normal');
        }

        // Add event listeners to the buttons
        document.getElementById('encrypt-btn').addEventListener('click', () => processCipher('encrypt'));
        document.getElementById('decrypt-btn').addEventListener('click', () => processCipher('decrypt'));

        // Initialize the result box content on load to confirm the script is active
        const initialResultBox = document.getElementById('result-box');
        initialResultBox.textContent = "Script Loaded! Enter your message and click Encrypt or Decrypt.";
        initialResultBox.classList.add('font-bold', 'text-indigo-600');
        
        console.log("Caesar Cipher script initialization complete.");
    </script>

</body>
</html>
